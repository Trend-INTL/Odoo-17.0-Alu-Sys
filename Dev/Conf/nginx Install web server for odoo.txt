sudo apt install nginx -y
cd /etc/nginx/sites-available
ls -a -lh
cd sites-available
ls -a -lh
sudo nano odoo16.conf
sudo chmod 755 odoo16.conf
sudo chown odoo:root odoo16.conf

========================================================
Copy this and paste into file /etc/nginx/sites-available
========================================================
------------------------------------------------------------------------------------------------------------------------------
from the following line
##################################################################
#odoo server
upstream odoo {
server 127.0.0.1:8069;
}
upstream odoochat {
server 127.0.0.1:8072;
}


server {
listen 80;
server_name 195.35.28.250;

proxy_read_timeout 720s;
proxy_connect_timeout 720s;
proxy_send_timeout 720s;


# Add Headers for odoo proxy mode
proxy_set_header X-Forwarded-Host $host;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
proxy_set_header X-Real-IP $remote_addr;

# log
access_log /var/log/nginx/odoo.access.log;
error_log /var/log/nginx/odoo.error.log;

# Redirect requests to odoo backend server
location / {
proxy_redirect off;
proxy_pass http://odoo;
}
location /longpolling {
proxy_pass http://odoochat;
}

# common gzip
gzip_types text/css text/less text/plain text/xml application/xml application/json application/javascript;
gzip on;


client_body_in_file_only clean;
client_body_buffer_size 32K;
client_max_body_size 500M;
sendfile on;
send_timeout 600s;
keepalive_timeout 300;
}
#####################################################
Till the above line
-----------------------------------------------------------------------------------------------------------------------------

then ===>>> RUN

sudo ln -s /etc/nginx/sites-available/odoo16.conf /etc/nginx/sites-enabled/odoo16.conf
ls -a -lh	===>>> to insure odoo16.conf file created
cd /etc/nginx/sites-enabled
ls -a -lh	==========>>> you will find a copy of odoo16.conf file
--------------------RUN NGINX WEB SERVER-------------------------------------------------------


sudo nginx -t

cd /opt/odoo16/odoo
proxy_mode = True

sudo service apache2 status
sudo service apache2 stop
sudo service apache2 status

sudo service nginx status
sudo service nginx stop
sudo service nginx status
sudo service nginx start
sudo service nginx status
sudo service nginx restart
sudo service nginx status

sudo service odoo16 status
sudo service odoo16 stop
sudo service odoo16 status
sudo service odoo16 start
sudo service odoo16 status

---------------------------------TEST LOG FILE--------------------------------------------------
sudo tail -f /var/log/nginx/odoo.access.log
sudo tail -f /var/log/nginx/odoo.error.log



sudo nano odoo16.conf
cd /etc/nginx/sites-available
sudo chmod 755 odoo16.conf
sudo chown odoo:odoo odoo16.conf
sudo rm -rf odoo16.conf


===================================================================================================================
TO RUN MULTI-PROCCESSING WORKERS IN ODOO SERVER
===================================================================================================================
ps aux || grep odoo16
cd /opt/odoo16/odoo
sudo nano odoo16.conf
worker = 4	=====>>>>  Rule of thumb : (#CPU * 2) + 1 & Cron workers need CPU & 1 worker ~= 6 concurrent users
sudo service odoo16 restart

===================================================================================================================
TO ADD DOMAIN NAME INSTEAD OD IP ADDRESS TO ODOO SERVER
===================================================================================================================

1- Login to your host
2- Go to domains
3- Go to DNS/Nameservers
4- in the top of screen search for DNS A record
5- Change as below
	Type	Name	Priority	Content/IP			TTL
	A	@	0		195.35.28.250		no change


===================================================================================================================
TO ADD SSL CERTIFICATE TO YOUR DOMAIN FOR ODOO SERVER
===================================================================================================================

sudo apt install certbot python3-certbot-nginx
cd /etc/nginx/sites-enabled
sudo nano odoo16.conf

Change the server name as below

server_name trend-ai.tech www.trend-ai.tech;
sudo nginx -t
sudo systemctl reload nginx

sudo certbot --nginx -d trend-ai.tech -d www.trend-ai.tech

/sudo certbot --nginx -d example.com -d www.example.com 	====>>> No need
/find / -type f -name ".certbot.lock" -exec rm {} \;  ======>>> if error

===================================================================================================================
TO ENABLE FIREWALL ON YOUR DOMAIN FOR ODOO SERVER
===================================================================================================================

sudo ufw allow 'Nginx Full'
sudo ufw delete allow 'Nginx HTTP'


========================================
Stackflow copy-------------
========================================
###################################################################################################################
#odoo server
upstream odoo {
  server 127.0.0.1:8069;
}
upstream odoochat {
  server 127.0.0.1:8072;
}

# http -> https
server {
  listen 80;
  server_name vidatest.xyz;
  rewrite ^(.*) https://$host$1 permanent;
}

server {
  listen 443 ssl;
  server_name vidatest.xyz;
  proxy_read_timeout 720s;
  proxy_connect_timeout 720s;
  proxy_send_timeout 720s;

  # Add Headers for odoo proxy mode
  proxy_set_header X-Forwarded-Host $host;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Proto $scheme;
  proxy_set_header X-Real-IP $remote_addr;

  # SSL parameters
  ssl_certificate /etc/certs/certs_14March2022/98fa7f5df02b430e.crt;
  ssl_certificate_key /etc/certs/generated-private-key.key;
  ssl_session_timeout 30m;
  ssl_protocols TLSv1.2;
  ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;
  ssl_prefer_server_ciphers off;


  # log
  access_log /var/log/nginx/odoo.access.log;
  error_log /var/log/nginx/odoo.error.log;

  # Redirect longpoll requests to odoo longpolling port
  location /longpolling {
    proxy_pass http://odoochat;
  }

  # Redirect requests to odoo backend server
  location / {
    proxy_redirect off;
    proxy_pass http://odoo;
  }

  # common gzip
  gzip_types text/css text/scss text/plain text/xml application/xml application/json application/javascript;
  gzip on;
}
################################################################################################################